<p>I&#8217;d like to write a few essays related to relational databases in the next weeks, such as discussing migrations from a logical point of view or presenting some relational operators implemented in <a target="_blank" href="http://blambeau.github.com/alf/overview/index.html">Alf</a> and borrowed from <a target="_blank" href="http://en.wikipedia.org/wiki/D_(data_language_specification)"><span class="caps">TUTORIAL</span> D</a>. In order to make those posts self-contained and precise enough, I first need some material. This is the purpose of this essay, that could be summarized as:</p>
<p class="attention">What every computer scientist should know about the relational theory</p>
<p>Let me add that the material covered here is mostly inspired from what can be found in <a target="_blank" href="http://www.thethirdmanifesto.com/">the third manifesto</a>, by Hugh Darwen and Chris Date. TL;DR: you should read that piece of work, really.</p>
<h3>The relational theory is made of <em>orthogonal</em> layers</h3>
<p>When I ask my colleagues or students how they would describe relational databases, it often ends up with an answer along the following lines:</p>
<p class="attention">Well, hum&#8230; Relational databases are made of tables that contain records. Tables may also refer to each other through foreign keys. The <span class="caps">SQL</span> language allows querying that data, such as selecting records based on the primary key or joining tables along foreign keys.</p>
<p>This is a pity. Not because it is wrong; I mean, it actually corresponds to a reality with most of the <span class="caps">SQL</span> products available today. It is a pity because with such a poor vision of database theory in the computer field, there is absolutely no chance that the database stuff will evolve in a good direction in the next decades. You certainly know this maxim <em>&#8220;those who cannot remember the past are condemned to repeat it&#8221;</em>, don&#8217;t you? Well, it has an interresting  corollary, namely <em>&#8220;those who made important breakthroughs knew how the previous stuff worked&#8221;</em>. To be completely fair, however, it should be rephrased here as <em>&#8220;[&#8230;] how the previous stuff was supposed to work&#8221;</em>.</p>
<p>Let me now share a personal answer to the question above <em>&#8220;how would you describe relational databases?&#8221;</em>. Facing this question, I would probably say something along the following lines:</p>
<p class="attention">Well, hum. Relational databases are a rather opinionated way of organizing and managing data through relations. I must immediately add that, strictly speaking, the relational theory only prescribes how data should be managed from a <strong>logical</strong> point of view. In other words, it prescribes how <strong>users</strong> should see, organize and manipulate data, in contrast to how data is <strong>physically</strong> organized and indexed on disks, or even distributed among different <strong>computers</strong>.<br />
<br />
Now, I&#8217;ve said &#8220;rather opinionated&#8221; above but it should not be ill-interpreted. The relational stuff can actually be decomposed in three layers: a theory of data types (including the notion of relation), the relational algebra, and rules for relational databases. <br />
<br />
The first two, type theory and relational algebra, actually define formal material and could hardly be considered opinionated. I mean, it does not really make sense of criticizing arithmetic or graph theory. It may make sense to argue about the adequacy of a specific set of equations to model economic laws, but it does not make sense of rejecting the concept of an equation itself. <br />
<br />
The same applies to relational theory. A relation, for example, can be seen as a powerful data-structure (loosely speaking here). Relations are powerful because they come with numerous awesome operators that together form the relational algebra. In the context of relational databases, this algebra yields the database query language (for completeness, I must add that <span class="caps">SQL</span> is actually a calculus, not an algebra; the difference is not crucial here). Now, observe that this part of the relational theory is actually orthogonal to databases themselves. I mean, you can use relations and the relational algebra outside of any database context. That is what maths are for, definitely.<br />
<br />
Now, relational databases. Mostly the so-called &#8216;information principle&#8217;: &#8220;<strong>all information in the database should be represented (at the logical level) in only one way, namely, relations</strong>&#8221;. This is opinionated, in the sense that the adequacy of such a rule for effective data management might be argued. Other important rules for relational databases include <a href="logical_data_independence">logical data independence</a>, physical data independence and integrity independence (leading to the concept of foreign key, among others integrity concepts). <br />
<br />
Those rules are opinionated and sometimes lead to intense debates, even withing the relational community itself. The adequate treatment of unknown information (<span class="caps">NULL</span>), and what form a sound set of rules for updating views are mostly open issues, for instance. Now, those issues are somewhat independent of the relational theory itself. I mean, discarding an imperfect drug has never killed a disease.</p>
<p>I confess that it is a very abstract answer, probably representative of the huge gap that exists between theory and practice in database management. This is a pity, trust me. The logical level envisionned by relational logicians is a pure beauty, that makes data management truly accessible to users and raises exciting research and development issues. I wish those awesome talented developers to know and embrace such abstract levels, instead of <a target="_blank" href="http://37signals.com/svn/posts/3045-top-tier-this">rejecting formal education as a whole</a>. Computers have been born from <a target="_blank" href="http://en.wikipedia.org/wiki/John_von_Neumann">the meeting between maths and engineering practices</a>. We need to reconciliate logicians and developers, especially in the database field.</p>
<p>Let me close the first part of this essay with a claim.</p>
<p class="attention">At the logical level, database migrations should be reduced to simple assignments of relation values to relation variables. That&#8217;s all.</p>
<p>In order to explain the meaning of this claim, I&#8217;ll have to complement this essay with something a bit more concrete. It will be the purpose of the next post.</p>